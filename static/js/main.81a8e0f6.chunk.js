(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t){e.exports={BASE_URL:"https://api.d-sektionen.se"}},12:function(e,t,a){e.exports={inputLabel:"preferences_inputLabel__WQPtR",submit:"preferences_submit__2Rndh"}},22:function(e,t,a){e.exports={topBar:"loggedIn_topBar__1iO--"}},25:function(e,t,a){e.exports={path:"pixels_path__2IsGG"}},26:function(e,t,a){e.exports=a(58)},31:function(e,t,a){},58:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(21),l=a.n(r),i=(a(31),a(1)),s=a(2),c=a(5),u=a(3),d=a(4),h=a(6),m=a(9),p=a.n(m),b=a(10),v=a(22),g=a.n(v),f=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:g.a.topBar},o.a.createElement("div",null,"Inloggad som: ",this.props.name),o.a.createElement("a",{href:"#",className:"button",onClick:this.props.logout},"Logga ut"))}}]),t}(n.Component),j=a(8),O=a.n(j),C=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:O.a.above},this.props.children)}}]),t}(n.Component),E=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:O.a.content},this.props.children)}}]),t}(n.Component),w=a(11),k=a(23),y=a.n(k),_=a(12),z=a.n(_),M=(a(20),function(e){function t(e){var a;return Object(i.a)(this,t),a=Object(c.a)(this,Object(u.a)(t).call(this,e)),e.user.profile||(e.user.profile={}),a.state={liuCardId:e.user.profile.liu_card_id,firstName:e.user.first_name,lastName:e.user.last_name},a.handleChange=a.handleChange.bind(Object(h.a)(Object(h.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e,t){this.setState(Object(w.a)({},e,t.target.value))}},{key:"handleSubmit",value:function(e){var t=b.BASE_URL+"/account/user/me/",a=p.a.get("token");y.a.put(t,{first_name:this.state.firstName,last_name:this.state.lastName,profile:{liu_card_id:this.state.liuCardId}},{headers:{Authorization:"JWT "+a}}).then(function(e){console.log(e.data)}),e.preventDefault()}},{key:"render",value:function(){var e=this;return o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("div",null,o.a.createElement("label",{className:z.a.inputLabel},"F\xf6rnamn:",o.a.createElement("input",{value:this.state.firstName,onChange:function(t){return e.handleChange("firstName",t)}}))),o.a.createElement("div",null,o.a.createElement("label",{className:z.a.inputLabel},"Efternamn:",o.a.createElement("input",{value:this.state.lastName,onChange:function(t){return e.handleChange("lastName",t)}}))),o.a.createElement("div",null,o.a.createElement("label",{className:z.a.inputLabel},"LiU-kortnummer:",o.a.createElement("input",{value:this.state.liuCardId,onChange:function(t){return e.handleChange("liuCardId",t)}}))),o.a.createElement("div",null,o.a.createElement("input",{type:"submit",value:"Submit",className:"".concat(z.a.submit," button")})))}}]),t}(n.Component)),H=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={loading:!0},a.success=a.success.bind(Object(h.a)(Object(h.a)(a))),a.failure=a.failure.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=b.BASE_URL+"/account/user/me",t=p.a.get("token");fetch(e,{headers:new Headers({Authorization:"JWT "+t})}).then(function(e){if(e.ok)return e.json();throw new Error("Network response was not ok.")}).then(this.success).catch(this.failure),this.props.setLoading(!0)}},{key:"success",value:function(e){this.props.setLoading(!1),this.setState({loading:!1,success:!0,data:e})}},{key:"failure",value:function(){this.props.setLoading(!1),this.setState({loading:!1,success:!1})}},{key:"render",value:function(){return this.state.loading?o.a.createElement(o.a.Fragment,null):this.state.success?o.a.createElement(o.a.Fragment,null,o.a.createElement(C,null,o.a.createElement(f,{name:this.state.data.username,logout:t.logout})),o.a.createElement(E,null,o.a.createElement("div",null,0!==this.state.data.sections.length?"Du \xe4r medlem i ".concat(this.state.data.sections.map(function(e){return e.name}).join(", "),"."):"Du saknar sektionsmedlemsskap."),o.a.createElement(M,{user:this.state.data}))):o.a.createElement(o.a.Fragment,null,o.a.createElement(C,null,o.a.createElement("a",{href:"#",className:"button",onClick:t.logout},"Logga ut")),o.a.createElement(E,null,o.a.createElement("p",null,"Inloggningen misslyckades, testa igen.")))}}],[{key:"logout",value:function(){p.a.remove("token"),window.location.reload()}}]),t}(n.Component),L=a(24),N=a(25),x=a.n(N),S=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).dColors={blue:"#20407C",yellow:"#F7E623",cerise:"#E5398D",brown:"#754022",green:"#70BD44"},e.originalPixels={"M52.742 74.106h10.769v10.485H52.742z":e.dColors.blue,"M76.128 74.106h10.769v10.485H76.128z":e.dColors.green,"M87.825 74.106h10.764v10.485H87.825z":e.dColors.cerise,"M98.589 96H87.825V85.517h10.764z":e.dColors.yellow,"M98.589 107.411H87.825V96.926h10.764z":e.dColors.brown,"M87.825 131.156h10.764v10.484H87.825z":e.dColors.brown,"M86.897 107.411H76.128V96.926h10.769z":e.dColors.blue,"M64.436 119.748h10.766v10.483H64.436z":e.dColors.brown,"M75.202 96H64.436V85.517h10.766z":e.dColors.brown,"M87.825 142.567h10.764v10.483H87.825z":e.dColors.yellow,"M99.516 142.567h10.77v10.483h-10.77z":e.dColors.cerise,"M121.978 164.46h-10.766v-10.483h10.766z":e.dColors.green,"M63.51 118.821H52.741v-10.485H63.51z":e.dColors.blue,"M75.202 118.821H64.436v-10.485h10.766z":e.dColors.green,"M41.049 74.106h10.767v10.485H41.049z":e.dColors.brown,"M41.049 96.926h10.767v10.485H41.049z":e.dColors.yellow,"M52.742 131.156h10.769v10.484H52.742z":e.dColors.yellow,"M75.202 153.05H64.436v-10.483h10.766z":e.dColors.blue,"M29.355 119.748h10.768v10.483H29.355z":e.dColors.cerise,"M87.825 165.386h10.764v10.485H87.825z":e.dColors.brown,"M134.597 165.386h10.768v10.485h-10.768z":e.dColors.cerise,"M64.436 62.697h10.766v10.482H64.436z":e.dColors.yellow,"M29.355 62.697h10.768v10.482H29.355z":e.dColors.green,"M76.128 51.284h10.769V61.77H76.128z":e.dColors.blue,"M75.202 107.411H64.436V96.926h10.766z":e.dColors.cerise,"M87.825 108.336h10.766v10.485H87.825z":e.dColors.cerise,"M63.51 96H52.741V85.517H63.51z":e.dColors.green,"M99.516 62.697h10.77v10.482h-10.77z":e.dColors.brown},e.state={pixels:e.originalPixels},e.setRandomColors=e.setRandomColors.bind(Object(h.a)(Object(h.a)(e))),e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.updateLoaderInterval()}},{key:"componentDidUpdate",value:function(e){e.loading!==this.props.loading&&this.updateLoaderInterval()}},{key:"render",value:function(){var e=this;return o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 154.68 166.116"},o.a.createElement("defs",null,o.a.createElement("clipPath",{id:"a"},o.a.createElement("path",{d:"M0 226.77h850.39V0H0z"}))),o.a.createElement("g",{clipPath:"url(#a)",transform:"matrix(1.33333 0 0 -1.33333 -39.13999942 234.4946576)"},Object.keys(this.state.pixels).map(function(t){return o.a.createElement("path",{key:t,className:x.a.path,d:t,fill:e.state.pixels[t]})})))}},{key:"updateLoaderInterval",value:function(){this.props.loading?this.interval=window.setInterval(this.setRandomColors,300):(this.interval&&window.clearInterval(this.interval),this.interval=null,this.setState({pixels:this.originalPixels}))}},{key:"setRandomColors",value:function(){var e=this;this.setState({pixels:Object.keys(this.originalPixels).reduce(function(t,a){return Object(L.a)({},t,Object(w.a)({},a,e.randomColor()))},{})})}},{key:"randomColor",value:function(){var e=Object.keys(this.dColors);return this.dColors[e[e.length*Math.random()<<0]]}}]),t}(n.Component),I=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:O.a.app},o.a.createElement("div",{className:O.a.pixels},o.a.createElement(S,{loading:this.props.loading})),o.a.createElement("div",{className:O.a.containerWrapper},o.a.createElement("div",{className:O.a.container},this.props.children)))}}]),t}(n.Component),B=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:O.a.below},this.props.children)}}]),t}(n.Component),R=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={loading:!1},e.setLoading=e.setLoading.bind(Object(h.a)(Object(h.a)(e))),e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=b.BASE_URL+"/account/token?redirect="+window.location.href,t=p.a.get("token");return o.a.createElement(I,{loading:this.state.loading},void 0!==t?o.a.createElement(H,{setLoading:this.setLoading}):o.a.createElement(o.a.Fragment,null,o.a.createElement(E,null,o.a.createElement("p",null,"Genom att logga in h\xe4r kan du uppdatera din profil i v\xe5r databas, inloggningen sker via LiUs centrala inloggningssystem.")),o.a.createElement(B,null,o.a.createElement("a",{href:e,className:"button"},"Logga in"))))}},{key:"setLoading",value:function(e){this.setState({loading:e})}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var D=a(20),P=a(9);!function(){var e=D.parse(window.location.search.slice(1));void 0!==e.token&&(P.set("token",e.token),window.history.replaceState(window.history.state,window.history.pageTitle,"/"))}(),l.a.render(o.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},8:function(e,t,a){e.exports={app:"layout_app__2wCEk",pixels:"layout_pixels__3PuTl",containerWrapper:"layout_containerWrapper__Dkm3Z",container:"layout_container__2i9B0",above:"layout_above__2z1lt",content:"layout_content__GxKJl",below:"layout_below__13ap8"}}},[[26,2,1]]]);
//# sourceMappingURL=main.81a8e0f6.chunk.js.map